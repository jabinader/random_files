import { Component, Input, ViewChild, Output, EventEmitter, HostListener, ContentChildren } from '@angular/core';
import { MatPaginator } from '@angular/material/paginator';
import { MatSort } from '@angular/material/sort';
import { takeUntil } from 'rxjs/operators';
import { Subject } from 'rxjs';
import { SirenFeDataSource } from './data-source/siren-fe-datasource';
import { CustomColsDirective } from './directive/custom-template.directive';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { SirenTableAction } from './enums/siren-table-action.enum';
import { DefaultFilterValue } from './enums/siren-table-filter-value.enum';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/forms";
import * as i3 from "@angular/material/tooltip";
import * as i4 from "@angular/material/sort";
import * as i5 from "@angular/cdk/drag-drop";
import * as i6 from "@angular/material/checkbox";
import * as i7 from "@angular/material/table";
import * as i8 from "@angular/material/paginator";
import * as i9 from "@angular/material/form-field";
import * as i10 from "@angular/material/icon";
import * as i11 from "@angular/material/button";
import * as i12 from "@angular/material/input";
import * as i13 from "./directive/ellipsify-me.directive";
import * as i14 from "./pipes/custom-template.pipe";
export class SirenTableComponent {
    constructor() {
        this.onSubmitClick = new EventEmitter();
        this.onRowClick = new EventEmitter();
        this.onDeleteClick = new EventEmitter();
        this.onReorder = new EventEmitter();
        this.displayedColumns = [];
        this.baseCols = [];
        this.sirenTableAction = SirenTableAction;
        this.allowFiltering = false; // Displays search box input above the table
        this.allowMultiSelection = false;
        this.allowSingleSelection = false;
        this.allowReordering = false;
        this.withDelete = false;
        this.allowPagination = false;
        this._onDestroy = new Subject();
        this.displayedColumnsWithAction = [];
        this.expandedCols = [];
        this.expandedElement = null;
        this.searchString = '';
        this.innerHeight = 0;
        this.isAllSelected = false;
        this.selectedRowCounter = 0;
        this.partialSelection = false;
        this.count = 0;
        this.previousKeyword = '';
    }
    onResize(event) {
        this.innerHeight = window.innerHeight;
    }
    ngOnChanges(changes) {
        if (changes?.displayedColumns?.previousValue) {
            this.loadColumns();
        }
        if (changes?.dataSource?.previousValue) {
            this.connectToDatasource();
            this.checkDataSourcePaginatorAndSort();
        }
    }
    ngOnDestroy() {
        this._onDestroy.next();
        this._onDestroy.complete();
    }
    ngOnInit() {
        this.innerHeight = window.innerHeight;
        this.loadColumns();
    }
    loadColumns() {
        this.expandedCols = this.displayedColumns.filter(column => column.expandedData);
        this.baseCols = this.displayedColumns.filter(column => !column.expandedData);
        this.displayedColumnsWithAction = this.baseCols.map(col => col.columnDef);
        if (this.expandedCols.length > 0 && !this.displayedColumnsWithAction?.includes(SirenTableAction.EXPAND)) {
            this.displayedColumnsWithAction?.push(SirenTableAction.EXPAND);
        }
        if ((this.allowSingleSelection || this.allowMultiSelection) && !this.displayedColumnsWithAction?.includes(SirenTableAction.SELECT)) {
            this.displayedColumnsWithAction?.unshift(SirenTableAction.SELECT);
        }
        if (this.withDelete && !this.displayedColumnsWithAction?.includes(SirenTableAction.DELETE)) {
            this.displayedColumnsWithAction?.push(SirenTableAction.DELETE);
        }
        if (this.allowReordering && !this.displayedColumnsWithAction?.includes(SirenTableAction.REORDER)) {
            this.displayedColumnsWithAction?.unshift(SirenTableAction.REORDER);
        }
    }
    ngAfterViewInit() {
        this.connectToDatasource();
        this.checkDataSourcePaginatorAndSort();
    }
    checkDataSourcePaginatorAndSort() {
        if (this.dataSource instanceof SirenFeDataSource) {
            if (this.allowPagination) {
                this.dataSource?.setPaginator(this.paginator);
            }
            this.dataSource?.setSort(this.sort);
        }
    }
    connectToDatasource() {
        this.dataSource?.connect()?.pipe(takeUntil(this._onDestroy)).subscribe(data => {
            if (data) {
                this.count = this.dataSource.getCount();
                this.updateParams();
                this.updateSelectionStatus();
            }
        });
    }
    /**
     * Updates sortColumn and sortDirection
     * @param changes chosen sortCOlumn and sortDirection
     */
    updateSortParams(changes) {
        this.sortColumn = changes.active;
        this.sortDirection = changes.direction;
        const data = { sortColumn: this.sortColumn, sortDirection: this.sortDirection };
        this.dataSource.updateSortParams(data);
    }
    /**
     * Updates page and size
     * @param changes chosen page and size
     */
    updatePaginationParams(changes) {
        if (this.allowPagination) { // updatePaginationParams is a public method => It can be called from the parent component.
            this.page = changes.pageIndex;
            this.size = changes.pageSize;
            const data = { page: this.page, size: this.size };
            this.dataSource.updatePaginationParams(data);
        }
    }
    updateParams() {
        if (this.allowPagination) {
            this.page = this.dataSource?.getPage();
            this.paginator.pageIndex = this.page;
            this.size = this.dataSource?.getSize();
            this.paginator.pageSize = this.size;
        }
        this.sortColumn = this.dataSource?.getSortColumn();
        this.sort.active = this.sortColumn;
        this.sortDirection = this.dataSource?.getSortDirection();
        this.sort.direction = this.sortDirection;
        this.searchString = this.dataSource?.getKeyword();
    }
    /** Selects all rows if they are not all selected; otherwise clear selection. */
    masterToggle(event) {
        this.clickedRow = null;
        if (event.checked) {
            if (this.allowMultiSelection) {
                this.dataSource.selectAllRows();
            }
            else {
                this.dataSource.deselectAllRows(false);
                event.source.checked = false;
            }
        }
        else {
            this.dataSource.deselectAllRows();
        }
        this.updateSelectionStatus();
    }
    get searchChanged() {
        return this.searchString;
    }
    set searchChanged(input) {
        this.searchString = input?.trim();
    }
    /**
     * Selects row
     * @param event check's event
     * @param row selected row
     */
    selectRowTable(event, row) {
        this.clickedRow = null;
        if (event?.checked) {
            if (!this.allowMultiSelection) {
                this.dataSource.deselectAllRows(false);
            }
            this.dataSource.selectRow(row);
        }
        else {
            this.dataSource.deselectRow(row);
        }
        this.updateSelectionStatus();
    }
    /**
     * These function is used to update checkbox status
     */
    updateSelectionStatus() {
        this.isAllSelected = this.dataSource?.isAllRowsSelected();
        this.partialSelection = this.dataSource?.getSelectionCounter() > 0;
        this.selectedRowCounter = this.dataSource?.getSelectionCounter();
    }
    /**
     * Filters table's data based on given keyword
     * @param keyword keyword in search box input
     */
    quickSearchChanged(keyword) {
        keyword = keyword?.trim().toLowerCase();
        if (keyword !== this.previousKeyword && this.allowFiltering) {
            this.previousKeyword = keyword;
            if (this.allowPagination) {
                this.page = DefaultFilterValue.DEFAULT_PAGE;
                this.paginator.pageIndex = this.page;
            }
            keyword = keyword?.trim().toLowerCase(); // Remove whitespace
            this.dataSource.filter(keyword);
        }
    }
    /**
     * @param row Emits the row to be deleted and its index through `onDeleteClick` listener
     */
    deleteBtnClicked(row) {
        if (row.isSelected) {
            this.dataSource.deselectRow(row);
        }
        const index = this.dataSource.getIndexOf(row);
        this.onDeleteClick.emit({ row, index });
    }
    /**
     * Emits clicked row through `onRowClick` listener
     * @param row clicked row
     */
    onRowClickClicked(row) {
        if (this.onRowClick.observers.length > 0) { // check if the parent component is listening on row click event
            this.clickedRow = row.selectionId;
            this.onRowClick.emit(row);
        }
    }
    /**
     * Swaps table's rows
     * @param event emitted when the user drops a draggable item inside a drop container.
     */
    swapRows(event) {
        const previousIndex = this.allowPagination ? event.previousIndex + this.page * this.size : event.previousIndex;
        const currentIndex = this.allowPagination ? event.currentIndex + this.page * this.size : event.currentIndex;
        this.dataSource.swapRows(previousIndex, currentIndex);
        this.table.renderRows();
        this.onReorder.emit({ event, data: this.dataSource.getData() });
    }
}
SirenTableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.1", ngImport: i0, type: SirenTableComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
SirenTableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.1", type: SirenTableComponent, selector: "siren-table", inputs: { displayedColumns: "displayedColumns", dataSource: "dataSource", allowFiltering: "allowFiltering", allowMultiSelection: "allowMultiSelection", allowSingleSelection: "allowSingleSelection", allowReordering: "allowReordering", withDelete: "withDelete", allowPagination: "allowPagination", labels: "labels" }, outputs: { onSubmitClick: "onSubmitClick", onRowClick: "onRowClick", onDeleteClick: "onDeleteClick", onReorder: "onReorder" }, host: { listeners: { "window:resize": "onResize($event)" } }, queries: [{ propertyName: "customTemplates", predicate: CustomColsDirective }], viewQueries: [{ propertyName: "paginator", first: true, predicate: MatPaginator, descendants: true }, { propertyName: "sort", first: true, predicate: MatSort, descendants: true }, { propertyName: "table", first: true, predicate: ["table"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"siren-table-search-container\" >\n    <mat-form-field appearance=\"fill\" class=\"siren-table-search-field full-width-mobile\"  *ngIf=\"allowFiltering\" >\n        <button *ngIf=\"searchChanged !== ''\" mat-icon-button matSuffix (click)=\"searchChanged = ''; quickSearchChanged('')\">\n            <mat-icon class=\"siren-table-mat-icons\">clear</mat-icon>\n        </button>\n        <input autocomplete=\"off\" (keyup)=\"quickSearchChanged($event.target.value)\"\n            matInput [placeholder]=\"labels?.searchBoxLabel ?? '\u0628\u062D\u062B'\" [(ngModel)]=\"searchChanged\">\n        <button mat-icon-button matPrefix><mat-icon class=\"siren-table-mat-icons\">search</mat-icon></button>\n    </mat-form-field>\n</div>\n\n<div *ngIf=\"count === 0\" style=\"padding-inline-start: 10px;\">{{ labels?.noDataLabel ?? \"\u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A\" }}</div>\n\n<div class=\"siren-table-container mat-elevation-z8\" [ngClass]=\"{'visibility-hidden': count === 0}\">\n    <div class=\"siren-table-data-container\" [ngStyle]=\"{ 'height': (innerHeight * 0.35) + 'px' }\">\n        <table mat-table #table multiTemplateDataRows [dataSource]=\"dataSource\" class=\"siren-table\" matSort [matSortActive]=\"sortColumn\" [matSortDirection]=\"sortDirection\" (matSortChange)=\"updateSortParams($event)\" cdkDropList [cdkDropListData]=\"dataSource\" (cdkDropListDropped)=\"swapRows($event)\">\n            <!-- Checkbox Column to select -->\n            <ng-container *ngIf=\"allowSingleSelection || allowMultiSelection\" matColumnDef={{sirenTableAction.SELECT}}>\n                <th mat-header-cell *matHeaderCellDef class=\"siren-table-checkbox-col siren-action-col\">\n                    <mat-checkbox  #selectAllCheckbox *ngIf=\"allowMultiSelection || partialSelection\" color=\"primary\" (change)=\"$event ? masterToggle($event) : null\"\n                        [checked]=\"isAllSelected\" (click)=\"$event.stopPropagation()\"\n                        [indeterminate]=\"partialSelection && !isAllSelected\" class=\"siren-table-checkbox\">\n                    </mat-checkbox>\n                </th>\n                <td mat-cell *matCellDef=\"let row\" class=\"siren-table-checkbox-col\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                    <mat-checkbox color=\"primary\" (change)=\"$event ? selectRowTable($event, row) : null\"\n                        [checked]=\"row.isSelected || selectAllCheckbox?.checked\" class=\"siren-table-checkbox\">\n                    </mat-checkbox>\n                </td>\n            </ng-container>\n\n            <!-- Position Column -->\n            <ng-container *ngIf=\"allowReordering\" matColumnDef={{sirenTableAction.REORDER}} class=\"siren-action-col\">\n                <th mat-header-cell class=\"montserrat bold siren-action-col\" *matHeaderCellDef></th>\n                <td mat-cell class=\"openSans\" *matCellDef=\"let element\">\n                <mat-icon class=\"siren-table-mat-icons\" cdkDragHandle>reorder</mat-icon>\n                </td>\n            </ng-container>\n\n            <!-- show hide details -->\n            <ng-container *ngIf=\"expandedCols.length > 0\" matColumnDef={{sirenTableAction.EXPAND}} class=\"siren-action-col\">\n                <th mat-header-cell class=\"montserrat bold siren-action-col\" *matHeaderCellDef> </th>\n                <td mat-cell class=\"openSans\" *matCellDef=\"let element\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                    <mat-icon class=\"siren-table-expand-btn siren-table-mat-icons\" (click)=\"expandedElement = expandedElement === element ? null : element\">{{expandedElement === element ? 'expand_less' : 'expand_more'}}</mat-icon>\n                </td>                \n            </ng-container>\n\n            <!-- Delete row action -->\n            <ng-container *ngIf=\"withDelete\" matColumnDef=\"{{ sirenTableAction.DELETE }}\" class=\"siren-action-col\">\n                <th mat-header-cell *matHeaderCellDef class=\"siren-action-col\"></th> \n                <td mat-cell *matCellDef=\"let element\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                    <button mat-mini-fab class=\"siren-table-delete-btn\" (click)=\"deleteBtnClicked(element)\"><mat-icon class=\"siren-table-mat-icons\">delete</mat-icon></button>\n                </td>\n            </ng-container>\n\n            <!-- The base columns -->\n            <ng-container *ngFor=\"let column of baseCols\" matColumnDef={{column.columnDef}}>\n                <!-- default columns -->\n                <div *ngIf=\"!column.customColumn\">\n                    <th mat-header-cell class=\"montserrat bold siren-table-header\" *matHeaderCellDef=\"let element\" mat-sort-header [disabled]=\"!column.allowSorting ?? false\"> {{column.header}} </th> \n                    <td mat-cell class=\"openSans\" *matCellDef=\"let element\" class=\"siren-table-cell\" [ngClass]=\"{'cursor-pointer': onRowClick.observers.length > 0}\" (click)=\"onRowClickClicked(element)\" \n                    [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                        <span [matTooltip]=\"column.cellValue(element)\" appTooltipIfTruncated *ngIf=\"column.cellValue(element) !== true && column.cellValue(element) !== false\" [ngClass]=\"{'ellipsis-overflow': column.allowEllipsis}\">\n                            {{ column.cellValue(element) || ' '}}\n                        </span>\n                        <mat-icon class=\"siren-table-checked-icon siren-table-mat-icons\" *ngIf=\"column.cellValue(element) === true\">check_circle</mat-icon>\n                        <mat-icon class=\"siren-table-unchecked-icon siren-table-mat-icons\" *ngIf=\"column.cellValue(element) === false\">cancel</mat-icon>\n                    </td>\n                </div>\n                <!-- custom template columns -->\n                <div *ngIf=\"column.customColumn\">\n                    <th mat-header-cell class=\"montserrat bold siren-table-header\" *matHeaderCellDef=\"let element\"> {{ column.header }}</th> \n                    <td mat-cell class=\"siren-table-cell\" *matCellDef=\"let element\" [ngClass]=\"{'cursor-pointer': onRowClick.observers.length > 0}\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                        <ng-container *ngTemplateOutlet=\"customTemplates | customTemplate : column.columnDef; context: {$implicit: element}\"></ng-container>\n                    </td>\n                </div>\n            </ng-container>\n             <!-- expanded columns -->\n            <ng-container matColumnDef=\"sirenExpandedData\">\n                <td mat-cell *matCellDef=\"let element\" [attr.colspan]=\"displayedColumnsWithAction.length+1\">\n                    <div class=\"siren-table-expand-row\" *ngFor=\"let column of expandedCols\"\n                    [@detailExpand]=\"element == expandedElement ? 'expanded' : 'collapsed'\" [style.height]=\"element == expandedElement ? 'unset' : '0 !important'\">\n                        <div *ngIf=\"column.cellValue(element)\">{{ column.header || ''}}</div>\n                        <div *ngIf=\"column.cellValue(element)\">{{ column.cellValue(element) || ''}}</div>\n                    </div>\n                </td>\n            </ng-container>\n\n            <tr mat-header-row *matHeaderRowDef=\"displayedColumnsWithAction; sticky: true\"></tr>\n            <tr mat-row *matRowDef=\"let row; columns: displayedColumnsWithAction\" cdkDrag [cdkDragDisabled]=\"!allowReordering\" [cdkDragData]=\"row\"\n                [ngClass]=\"{ 'selected': (row?.isSelected) || (row?.selectionId == clickedRow && clickedRow != undefined), 'element-row': onRowClick.observers.length > 0 }\">\n            </tr>\n            <div *ngIf=\"expandedCols.length > 0\">\n                <tr mat-row *matRowDef=\"let row; columns: ['sirenExpandedData']\" class=\"detail-row\" [ngClass]=\"{ 'selected': (row.isSelected) || (row.selectionId === clickedRow && clickedRow != undefined)}\"></tr>\n            </div>\n        </table>\n    </div>\n    <div class=\"siren-table-paginator-container\" *ngIf=\"allowPagination\">\n        <mat-paginator [pageSize]=\"size\" [pageIndex]=\"page\" [length]=\"count\" #paginator (page)=\"updatePaginationParams($event)\" [pageSizeOptions]=\"[10, 20, 50, 100, 200, 1000]\" showFirstLastButtons ></mat-paginator>\n        <div *ngIf=\"(allowMultiSelection || allowSingleSelection) && selectedRowCounter > 0\">\n            <span class=\"siren-table-selection-counter\" >{{selectedRowCounter}} {{ labels?.selectionLabel ?? \"\u0628\u064A\u0627\u0646\u0627\u062A \u0645\u062D\u062F\u062F\u0629\" }}</span>\n        </div>\n    </div>\n</div>\n<div class=\"submit-container\" *ngIf=\"( allowSingleSelection || allowMultiSelection ) && count !== 0\" style=\"padding-top: 8px; margin: 10px 15px\">\n    <button mat-raised-button class=\"siren-table-submit-btn\" (click)=\"onSubmitClick.emit(this.dataSource.getSelectedRows())\">{{ labels?.doneBtnLabel ?? \"\u0627\u0646\u062A\u0647\u0627\u0621\" }}</button>\n</div>\n", styles: ["table{width:100%}tr.detail-row{height:0}.siren-table-selection-counter{color:#777;font-size:13px}.siren-table-data-container{overflow:auto}.mat-row.selected{background:rgba(195,41,67,.1019607843)}.siren-table-container{padding:0;margin:10px 15px;background-color:#fff}.submit-container{padding-top:8px;margin:10px 15px;flex-direction:row;box-sizing:border-box;display:flex;place-content:center flex-end;align-items:center}tr.mat-header-row{background-color:#fff}.element-row:not(.selected):hover{background:#ececec}.cursor-pointer{cursor:pointer}.siren-table-expand-row{overflow:hidden;display:flex;flex-direction:row;align-items:center;justify-content:space-around}.siren-table-expand-row div{padding-bottom:5px}.siren-table-expand-btn{color:#5cc4cc;cursor:pointer}.siren-table-unchecked-icon{color:#c32943}.siren-table-checked-icon{color:#64ce16}.visibility-hidden{visibility:hidden}.siren-table{box-shadow:none}.siren-table .mat-header-cell{color:#535353;font-weight:700;font-size:13px;font-family:inherit;padding-inline-end:8px;padding-inline-start:8px}.siren-table .mat-cell{color:#777;font-weight:400;font-size:13px;font-family:inherit;padding-inline-end:8px;padding-inline-start:8px}.siren-table .mat-cell span{white-space:nowrap}.siren-table .mat-cell mat-icon{vertical-align:middle}.siren-table .siren-table-checkbox-col{padding-top:8px}.siren-table .siren-table-checkbox-col .siren-table-checkbox{margin:10px}.ellipsis-overflow{overflow-y:hidden!important;display:-webkit-box!important;text-overflow:ellipsis!important;-webkit-line-clamp:3!important;-webkit-box-orient:vertical!important;white-space:pre-wrap!important}.siren-table-submit-btn{padding:10px 30px;height:30px;border-radius:15px;color:#fff;line-height:1px;font-family:inherit;font-size:12px;border:none;background-color:#5cc4cc;width:-moz-fit-content;width:fit-content}.mat-paginator{display:inline-flex}::ng-deep .mat-paginator-range-label{font-size:12px;font-family:inherit;color:#777}::ng-deep .mat-paginator-page-size-label{font-size:12px;font-family:inherit;color:#777}::ng-deep .mat-select-value-text{font-size:12px;font-family:inherit;color:#777}.siren-table-paginator-container{display:flex;flex-direction:row;align-items:center}.siren-table-search-container{margin-inline-start:10px}.siren-table-search-container ::ng-deep .mat-form-field-flex{height:40px}.siren-table-search-container ::ng-deep .mat-form-field-underline{display:none}.siren-table-search-container ::ng-deep button{position:relative;bottom:8px}.siren-table-search-container ::ng-deep input{position:relative;bottom:14px}.siren-table-delete-btn{background-color:#c329431a}.siren-table-delete-btn mat-icon{color:#c32943;font-size:22px}.siren-action-col{width:10px}@media screen and (max-width: 599px){.full-width-mobile{width:100%}.siren-table-data-container{overflow-x:visible}::ng-deep .table-view{margin:5px}.siren-table-search-container{margin-inline-start:0px}.siren-table-search-field button{bottom:15px}.siren-table-search-field input{bottom:13px}.siren-table-search-field .mat-form-field-flex{padding:4px}.siren-table-container{margin:10px 5px}::ng-deep .mat-paginator-outer-container .mat-paginator-range-label{margin:0}}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i1.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "directive", type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i2.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "directive", type: i3.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "directive", type: i4.MatSort, selector: "[matSort]", inputs: ["matSortDisabled", "matSortActive", "matSortStart", "matSortDirection", "matSortDisableClear"], outputs: ["matSortChange"], exportAs: ["matSort"] }, { kind: "component", type: i4.MatSortHeader, selector: "[mat-sort-header]", inputs: ["disabled", "mat-sort-header", "arrowPosition", "start", "sortActionDescription", "disableClear"], exportAs: ["matSortHeader"] }, { kind: "directive", type: i5.CdkDropList, selector: "[cdkDropList], cdk-drop-list", inputs: ["cdkDropListConnectedTo", "cdkDropListData", "cdkDropListOrientation", "id", "cdkDropListLockAxis", "cdkDropListDisabled", "cdkDropListSortingDisabled", "cdkDropListEnterPredicate", "cdkDropListSortPredicate", "cdkDropListAutoScrollDisabled", "cdkDropListAutoScrollStep"], outputs: ["cdkDropListDropped", "cdkDropListEntered", "cdkDropListExited", "cdkDropListSorted"], exportAs: ["cdkDropList"] }, { kind: "directive", type: i5.CdkDrag, selector: "[cdkDrag]", inputs: ["cdkDragData", "cdkDragLockAxis", "cdkDragRootElement", "cdkDragBoundary", "cdkDragStartDelay", "cdkDragFreeDragPosition", "cdkDragDisabled", "cdkDragConstrainPosition", "cdkDragPreviewClass", "cdkDragPreviewContainer"], outputs: ["cdkDragStarted", "cdkDragReleased", "cdkDragEnded", "cdkDragEntered", "cdkDragExited", "cdkDragDropped", "cdkDragMoved"], exportAs: ["cdkDrag"] }, { kind: "directive", type: i5.CdkDragHandle, selector: "[cdkDragHandle]", inputs: ["cdkDragHandleDisabled"] }, { kind: "component", type: i6.MatCheckbox, selector: "mat-checkbox", inputs: ["disableRipple", "color", "tabIndex"], exportAs: ["matCheckbox"] }, { kind: "component", type: i7.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { kind: "directive", type: i7.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { kind: "directive", type: i7.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { kind: "directive", type: i7.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { kind: "directive", type: i7.MatCellDef, selector: "[matCellDef]" }, { kind: "directive", type: i7.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { kind: "directive", type: i7.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { kind: "directive", type: i7.MatCell, selector: "mat-cell, td[mat-cell]" }, { kind: "component", type: i7.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { kind: "component", type: i7.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { kind: "component", type: i8.MatPaginator, selector: "mat-paginator", inputs: ["disabled"], exportAs: ["matPaginator"] }, { kind: "component", type: i9.MatFormField, selector: "mat-form-field", inputs: ["color", "appearance", "hideRequiredMarker", "hintLabel", "floatLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i9.MatPrefix, selector: "[matPrefix]" }, { kind: "directive", type: i9.MatSuffix, selector: "[matSuffix]" }, { kind: "component", type: i10.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i11.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "directive", type: i12.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "directive", type: i13.EllipsifyMeDirective, selector: "[matTooltip][appTooltipIfTruncated]" }, { kind: "pipe", type: i14.CustomTemplatePipe, name: "customTemplate" }], animations: [
        trigger('detailExpand', [
            state('collapsed, void', style({ height: '0px', minHeight: '0', display: 'none' })),
            state('expanded', style({ height: '*' })),
            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
            transition('expanded <=> void', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)'))
        ])
    ] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.1", ngImport: i0, type: SirenTableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'siren-table', animations: [
                        trigger('detailExpand', [
                            state('collapsed, void', style({ height: '0px', minHeight: '0', display: 'none' })),
                            state('expanded', style({ height: '*' })),
                            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
                            transition('expanded <=> void', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)'))
                        ])
                    ], template: "<div class=\"siren-table-search-container\" >\n    <mat-form-field appearance=\"fill\" class=\"siren-table-search-field full-width-mobile\"  *ngIf=\"allowFiltering\" >\n        <button *ngIf=\"searchChanged !== ''\" mat-icon-button matSuffix (click)=\"searchChanged = ''; quickSearchChanged('')\">\n            <mat-icon class=\"siren-table-mat-icons\">clear</mat-icon>\n        </button>\n        <input autocomplete=\"off\" (keyup)=\"quickSearchChanged($event.target.value)\"\n            matInput [placeholder]=\"labels?.searchBoxLabel ?? '\u0628\u062D\u062B'\" [(ngModel)]=\"searchChanged\">\n        <button mat-icon-button matPrefix><mat-icon class=\"siren-table-mat-icons\">search</mat-icon></button>\n    </mat-form-field>\n</div>\n\n<div *ngIf=\"count === 0\" style=\"padding-inline-start: 10px;\">{{ labels?.noDataLabel ?? \"\u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A\" }}</div>\n\n<div class=\"siren-table-container mat-elevation-z8\" [ngClass]=\"{'visibility-hidden': count === 0}\">\n    <div class=\"siren-table-data-container\" [ngStyle]=\"{ 'height': (innerHeight * 0.35) + 'px' }\">\n        <table mat-table #table multiTemplateDataRows [dataSource]=\"dataSource\" class=\"siren-table\" matSort [matSortActive]=\"sortColumn\" [matSortDirection]=\"sortDirection\" (matSortChange)=\"updateSortParams($event)\" cdkDropList [cdkDropListData]=\"dataSource\" (cdkDropListDropped)=\"swapRows($event)\">\n            <!-- Checkbox Column to select -->\n            <ng-container *ngIf=\"allowSingleSelection || allowMultiSelection\" matColumnDef={{sirenTableAction.SELECT}}>\n                <th mat-header-cell *matHeaderCellDef class=\"siren-table-checkbox-col siren-action-col\">\n                    <mat-checkbox  #selectAllCheckbox *ngIf=\"allowMultiSelection || partialSelection\" color=\"primary\" (change)=\"$event ? masterToggle($event) : null\"\n                        [checked]=\"isAllSelected\" (click)=\"$event.stopPropagation()\"\n                        [indeterminate]=\"partialSelection && !isAllSelected\" class=\"siren-table-checkbox\">\n                    </mat-checkbox>\n                </th>\n                <td mat-cell *matCellDef=\"let row\" class=\"siren-table-checkbox-col\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                    <mat-checkbox color=\"primary\" (change)=\"$event ? selectRowTable($event, row) : null\"\n                        [checked]=\"row.isSelected || selectAllCheckbox?.checked\" class=\"siren-table-checkbox\">\n                    </mat-checkbox>\n                </td>\n            </ng-container>\n\n            <!-- Position Column -->\n            <ng-container *ngIf=\"allowReordering\" matColumnDef={{sirenTableAction.REORDER}} class=\"siren-action-col\">\n                <th mat-header-cell class=\"montserrat bold siren-action-col\" *matHeaderCellDef></th>\n                <td mat-cell class=\"openSans\" *matCellDef=\"let element\">\n                <mat-icon class=\"siren-table-mat-icons\" cdkDragHandle>reorder</mat-icon>\n                </td>\n            </ng-container>\n\n            <!-- show hide details -->\n            <ng-container *ngIf=\"expandedCols.length > 0\" matColumnDef={{sirenTableAction.EXPAND}} class=\"siren-action-col\">\n                <th mat-header-cell class=\"montserrat bold siren-action-col\" *matHeaderCellDef> </th>\n                <td mat-cell class=\"openSans\" *matCellDef=\"let element\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                    <mat-icon class=\"siren-table-expand-btn siren-table-mat-icons\" (click)=\"expandedElement = expandedElement === element ? null : element\">{{expandedElement === element ? 'expand_less' : 'expand_more'}}</mat-icon>\n                </td>                \n            </ng-container>\n\n            <!-- Delete row action -->\n            <ng-container *ngIf=\"withDelete\" matColumnDef=\"{{ sirenTableAction.DELETE }}\" class=\"siren-action-col\">\n                <th mat-header-cell *matHeaderCellDef class=\"siren-action-col\"></th> \n                <td mat-cell *matCellDef=\"let element\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                    <button mat-mini-fab class=\"siren-table-delete-btn\" (click)=\"deleteBtnClicked(element)\"><mat-icon class=\"siren-table-mat-icons\">delete</mat-icon></button>\n                </td>\n            </ng-container>\n\n            <!-- The base columns -->\n            <ng-container *ngFor=\"let column of baseCols\" matColumnDef={{column.columnDef}}>\n                <!-- default columns -->\n                <div *ngIf=\"!column.customColumn\">\n                    <th mat-header-cell class=\"montserrat bold siren-table-header\" *matHeaderCellDef=\"let element\" mat-sort-header [disabled]=\"!column.allowSorting ?? false\"> {{column.header}} </th> \n                    <td mat-cell class=\"openSans\" *matCellDef=\"let element\" class=\"siren-table-cell\" [ngClass]=\"{'cursor-pointer': onRowClick.observers.length > 0}\" (click)=\"onRowClickClicked(element)\" \n                    [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                        <span [matTooltip]=\"column.cellValue(element)\" appTooltipIfTruncated *ngIf=\"column.cellValue(element) !== true && column.cellValue(element) !== false\" [ngClass]=\"{'ellipsis-overflow': column.allowEllipsis}\">\n                            {{ column.cellValue(element) || ' '}}\n                        </span>\n                        <mat-icon class=\"siren-table-checked-icon siren-table-mat-icons\" *ngIf=\"column.cellValue(element) === true\">check_circle</mat-icon>\n                        <mat-icon class=\"siren-table-unchecked-icon siren-table-mat-icons\" *ngIf=\"column.cellValue(element) === false\">cancel</mat-icon>\n                    </td>\n                </div>\n                <!-- custom template columns -->\n                <div *ngIf=\"column.customColumn\">\n                    <th mat-header-cell class=\"montserrat bold siren-table-header\" *matHeaderCellDef=\"let element\"> {{ column.header }}</th> \n                    <td mat-cell class=\"siren-table-cell\" *matCellDef=\"let element\" [ngClass]=\"{'cursor-pointer': onRowClick.observers.length > 0}\" [ngStyle]=\"{'border-bottom-width': expandedCols.length > 0 ? 0 : inherit}\">\n                        <ng-container *ngTemplateOutlet=\"customTemplates | customTemplate : column.columnDef; context: {$implicit: element}\"></ng-container>\n                    </td>\n                </div>\n            </ng-container>\n             <!-- expanded columns -->\n            <ng-container matColumnDef=\"sirenExpandedData\">\n                <td mat-cell *matCellDef=\"let element\" [attr.colspan]=\"displayedColumnsWithAction.length+1\">\n                    <div class=\"siren-table-expand-row\" *ngFor=\"let column of expandedCols\"\n                    [@detailExpand]=\"element == expandedElement ? 'expanded' : 'collapsed'\" [style.height]=\"element == expandedElement ? 'unset' : '0 !important'\">\n                        <div *ngIf=\"column.cellValue(element)\">{{ column.header || ''}}</div>\n                        <div *ngIf=\"column.cellValue(element)\">{{ column.cellValue(element) || ''}}</div>\n                    </div>\n                </td>\n            </ng-container>\n\n            <tr mat-header-row *matHeaderRowDef=\"displayedColumnsWithAction; sticky: true\"></tr>\n            <tr mat-row *matRowDef=\"let row; columns: displayedColumnsWithAction\" cdkDrag [cdkDragDisabled]=\"!allowReordering\" [cdkDragData]=\"row\"\n                [ngClass]=\"{ 'selected': (row?.isSelected) || (row?.selectionId == clickedRow && clickedRow != undefined), 'element-row': onRowClick.observers.length > 0 }\">\n            </tr>\n            <div *ngIf=\"expandedCols.length > 0\">\n                <tr mat-row *matRowDef=\"let row; columns: ['sirenExpandedData']\" class=\"detail-row\" [ngClass]=\"{ 'selected': (row.isSelected) || (row.selectionId === clickedRow && clickedRow != undefined)}\"></tr>\n            </div>\n        </table>\n    </div>\n    <div class=\"siren-table-paginator-container\" *ngIf=\"allowPagination\">\n        <mat-paginator [pageSize]=\"size\" [pageIndex]=\"page\" [length]=\"count\" #paginator (page)=\"updatePaginationParams($event)\" [pageSizeOptions]=\"[10, 20, 50, 100, 200, 1000]\" showFirstLastButtons ></mat-paginator>\n        <div *ngIf=\"(allowMultiSelection || allowSingleSelection) && selectedRowCounter > 0\">\n            <span class=\"siren-table-selection-counter\" >{{selectedRowCounter}} {{ labels?.selectionLabel ?? \"\u0628\u064A\u0627\u0646\u0627\u062A \u0645\u062D\u062F\u062F\u0629\" }}</span>\n        </div>\n    </div>\n</div>\n<div class=\"submit-container\" *ngIf=\"( allowSingleSelection || allowMultiSelection ) && count !== 0\" style=\"padding-top: 8px; margin: 10px 15px\">\n    <button mat-raised-button class=\"siren-table-submit-btn\" (click)=\"onSubmitClick.emit(this.dataSource.getSelectedRows())\">{{ labels?.doneBtnLabel ?? \"\u0627\u0646\u062A\u0647\u0627\u0621\" }}</button>\n</div>\n", styles: ["table{width:100%}tr.detail-row{height:0}.siren-table-selection-counter{color:#777;font-size:13px}.siren-table-data-container{overflow:auto}.mat-row.selected{background:rgba(195,41,67,.1019607843)}.siren-table-container{padding:0;margin:10px 15px;background-color:#fff}.submit-container{padding-top:8px;margin:10px 15px;flex-direction:row;box-sizing:border-box;display:flex;place-content:center flex-end;align-items:center}tr.mat-header-row{background-color:#fff}.element-row:not(.selected):hover{background:#ececec}.cursor-pointer{cursor:pointer}.siren-table-expand-row{overflow:hidden;display:flex;flex-direction:row;align-items:center;justify-content:space-around}.siren-table-expand-row div{padding-bottom:5px}.siren-table-expand-btn{color:#5cc4cc;cursor:pointer}.siren-table-unchecked-icon{color:#c32943}.siren-table-checked-icon{color:#64ce16}.visibility-hidden{visibility:hidden}.siren-table{box-shadow:none}.siren-table .mat-header-cell{color:#535353;font-weight:700;font-size:13px;font-family:inherit;padding-inline-end:8px;padding-inline-start:8px}.siren-table .mat-cell{color:#777;font-weight:400;font-size:13px;font-family:inherit;padding-inline-end:8px;padding-inline-start:8px}.siren-table .mat-cell span{white-space:nowrap}.siren-table .mat-cell mat-icon{vertical-align:middle}.siren-table .siren-table-checkbox-col{padding-top:8px}.siren-table .siren-table-checkbox-col .siren-table-checkbox{margin:10px}.ellipsis-overflow{overflow-y:hidden!important;display:-webkit-box!important;text-overflow:ellipsis!important;-webkit-line-clamp:3!important;-webkit-box-orient:vertical!important;white-space:pre-wrap!important}.siren-table-submit-btn{padding:10px 30px;height:30px;border-radius:15px;color:#fff;line-height:1px;font-family:inherit;font-size:12px;border:none;background-color:#5cc4cc;width:-moz-fit-content;width:fit-content}.mat-paginator{display:inline-flex}::ng-deep .mat-paginator-range-label{font-size:12px;font-family:inherit;color:#777}::ng-deep .mat-paginator-page-size-label{font-size:12px;font-family:inherit;color:#777}::ng-deep .mat-select-value-text{font-size:12px;font-family:inherit;color:#777}.siren-table-paginator-container{display:flex;flex-direction:row;align-items:center}.siren-table-search-container{margin-inline-start:10px}.siren-table-search-container ::ng-deep .mat-form-field-flex{height:40px}.siren-table-search-container ::ng-deep .mat-form-field-underline{display:none}.siren-table-search-container ::ng-deep button{position:relative;bottom:8px}.siren-table-search-container ::ng-deep input{position:relative;bottom:14px}.siren-table-delete-btn{background-color:#c329431a}.siren-table-delete-btn mat-icon{color:#c32943;font-size:22px}.siren-action-col{width:10px}@media screen and (max-width: 599px){.full-width-mobile{width:100%}.siren-table-data-container{overflow-x:visible}::ng-deep .table-view{margin:5px}.siren-table-search-container{margin-inline-start:0px}.siren-table-search-field button{bottom:15px}.siren-table-search-field input{bottom:13px}.siren-table-search-field .mat-form-field-flex{padding:4px}.siren-table-container{margin:10px 5px}::ng-deep .mat-paginator-outer-container .mat-paginator-range-label{margin:0}}\n"] }]
        }], propDecorators: { paginator: [{
                type: ViewChild,
                args: [MatPaginator, { static: false }]
            }], sort: [{
                type: ViewChild,
                args: [MatSort, { static: false }]
            }], table: [{
                type: ViewChild,
                args: ['table']
            }], onSubmitClick: [{
                type: Output
            }], onRowClick: [{
                type: Output
            }], onDeleteClick: [{
                type: Output
            }], onReorder: [{
                type: Output
            }], displayedColumns: [{
                type: Input
            }], dataSource: [{
                type: Input
            }], allowFiltering: [{
                type: Input
            }], allowMultiSelection: [{
                type: Input
            }], allowSingleSelection: [{
                type: Input
            }], allowReordering: [{
                type: Input
            }], withDelete: [{
                type: Input
            }], allowPagination: [{
                type: Input
            }], labels: [{
                type: Input
            }], customTemplates: [{
                type: ContentChildren,
                args: [CustomColsDirective]
            }], onResize: [{
                type: HostListener,
                args: ['window:resize', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGFibGUvc3JjL2xpYi90YWJsZS90YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy90YWJsZS9zcmMvbGliL3RhYmxlL3RhYmxlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBaUIsTUFBTSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQXVDLGVBQWUsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUN2TCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDM0QsT0FBTyxFQUFFLE9BQU8sRUFBaUIsTUFBTSx3QkFBd0IsQ0FBQztBQUNoRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHM0MsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUkvQixPQUFPLEVBQUcsaUJBQWlCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUV2RSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUM1RSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0IzRSxNQUFNLE9BQU8sbUJBQW1CO0lBYmhDO1FBa0JXLGtCQUFhLEdBQUcsSUFBSSxZQUFZLEVBQW9CLENBQUM7UUFDckQsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFrQixDQUFDO1FBQ2hELGtCQUFhLEdB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LFNBQVMsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7NEJBQ25GLEtBQUssQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7NEJBQ3pDLFVBQVUsQ0FBQyx3QkFBd0IsRUFBRSxPQUFPLENBQUMsc0NBQXNDLENBQUMsQ0FBQzs0QkFDckYsVUFBVSxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDO3lCQUM5RSxDQUFDO3FCQUNGOzhCQUcwQyxTQUFTO3NCQUFwRCxTQUFTO3VCQUFDLFlBQVksRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7Z0JBQ0gsSUFBSTtzQkFBMUMsU0FBUzt1QkFBQyxPQUFPLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO2dCQUNqQixLQUFLO3NCQUF4QixTQUFTO3VCQUFDLE9BQU87Z0JBRVIsYUFBYTtzQkFBdEIsTUFBTTtnQkFDRyxVQUFVO3NCQUFuQixNQUFNO2dCQUNHLGFBQWE7c0JBQXRCLE1BQU07Z0JBQ0csU0FBUztzQkFBbEIsTUFBTTtnQkFFRSxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBRUcsVUFBVTtzQkFBbEIsS0FBSztnQkFHRyxjQUFjO3NCQUF0QixLQUFLO2dCQUdHLG1CQUFtQjtzQkFBM0IsS0FBSztnQkFDRyxvQkFBb0I7c0JBQTVCLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUVHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBRUcsTUFBTTtzQkFBZCxLQUFLO2dCQWNnQyxlQUFlO3NCQUFwRCxlQUFlO3VCQUFDLG1CQUFtQjtnQkFRcEMsUUFBUTtzQkFEUCxZQUFZO3VCQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBBZnRlclZpZXdJbml0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSG9zdExpc3RlbmVyLCBPbkRlc3Ryb3ksIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3R9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0UGFnaW5hdG9yIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvcGFnaW5hdG9yJztcbmltcG9ydCB7IE1hdFNvcnQsIFNvcnREaXJlY3Rpb24gfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9zb3J0JztcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFNpcmVuVGFibGVGaWx0ZXJNb2RlbCB9IGZyb20gJy4vaW50ZXJmYWNlcy9zaXJlbi10YWJsZS1maWx0ZXIubW9kZWwnO1xuaW1wb3J0IHsgU2lyZW5UYWJsZUNvbHVtbnMgfSBmcm9tICcuL2ludGVyZmFjZXMvc2lyZW4tdGFibGUtY29sdW1ucy5tb2RlbCc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBDZGtEcmFnRHJvcCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgTWF0VGFibGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC90YWJsZSc7XG5pbXBvcnQgeyBTaXJlbkRhdGFTb3VyY2UgfSBmcm9tICcuL2RhdGEtc291cmNlL3NpcmVuLWRhdGFzb3VyY2UnO1xuaW1wb3J0IHsgIFNpcmVuRmVEYXRhU291cmNlIH0gZnJvbSAnLi9kYXRhLXNvdXJjZS9zaXJlbi1mZS1kYXRhc291cmNlJztcbmltcG9ydCB7IFNpcmVuVGFibGVDb25maWcsIFNpcmVuVGFibGVEYXRhIH0gZnJvbSAnLi9pbnRlcmZhY2VzL2RhdGEtdGFibGUubW9kZWwnO1xuaW1wb3J0IHsgQ3VzdG9tQ29sc0RpcmVjdGl2ZSB9IGZyb20gJy4vZGlyZWN0aXZlL2N1c3RvbS10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgYW5pbWF0ZSwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCB0cmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBTaXJlblRhYmxlQWN0aW9uIH0gZnJvbSAnLi9lbnVtcy9zaXJlbi10YWJsZS1hY3Rpb24uZW51bSc7XG5pbXBvcnQgeyBEZWZhdWx0RmlsdGVyVmFsdWUgfSBmcm9tICcuL2VudW1zL3NpcmVuLXRhYmxlLWZpbHRlci12YWx1ZS5lbnVtJztcbmltcG9ydCB7IE1hdENoZWNrYm94Q2hhbmdlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY2hlY2tib3gnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzaXJlbi10YWJsZScsXG4gIHRlbXBsYXRlVXJsOiAnLi90YWJsZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RhYmxlLmNvbXBvbmVudC5zYXNzJ10sXG4gIGFuaW1hdGlvbnM6IFtcbiAgICB0cmlnZ2VyKCdkZXRhaWxFeHBhbmQnLCBbXG5cdFx0c3RhdGUoJ2NvbGxhcHNlZCwgdm9pZCcsIHN0eWxlKHsgaGVpZ2h0OiAnMHB4JywgbWluSGVpZ2h0OiAnMCcsIGRpc3BsYXk6ICdub25lJyB9KSksXG5cdFx0c3RhdGUoJ2V4cGFuZGVkJywgc3R5bGUoeyBoZWlnaHQ6ICcqJyB9KSksXG5cdFx0dHJhbnNpdGlvbignZXhwYW5kZWQgPD0+IGNvbGxhcHNlZCcsIGFuaW1hdGUoJzIyNW1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKScpKSxcblx0XHR0cmFuc2l0aW9uKCdleHBhbmRlZCA8PT4gdm9pZCcsIGFuaW1hdGUoJzIyNW1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKScpKVxuXHQgIF0pXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgU2lyZW5UYWJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuXHRAVmlld0NoaWxkKE1hdFBhZ2luYXRvciwgeyBzdGF0aWM6IGZhbHNlIH0pIHBhZ2luYXRvcjogTWF0UGFnaW5hdG9yO1xuXHRAVmlld0NoaWxkKE1hdFNvcnQsIHsgc3RhdGljOiBmYWxzZSB9KSBzb3J0OiBNYXRTb3J0O1xuXHRAVmlld0NoaWxkKCd0YWJsZScpIHRhYmxlOiBNYXRUYWJsZTxhbnk+O1xuXG5cdEBPdXRwdXQoKSBvblN1Ym1pdENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxTaXJlblRhYmxlRGF0YVtdPigpO1xuXHRAT3V0cHV0KCkgb25Sb3dDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8U2lyZW5UYWJsZURhdGE+KCk7XG5cdEBPdXRwdXQoKSBvbkRlbGV0ZUNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjx7IHJvdzogU2lyZW5UYWJsZURhdGEsIGluZGV4OiBudW1iZXJ9PigpO1xuXHRAT3V0cHV0KCkgb25SZW9yZGVyID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cblx0QElucHV0KCkgZGlzcGxheWVkQ29sdW1uczogU2lyZW5UYWJsZUNvbHVtbnM8YW55PltdID0gW107XG5cdGJhc2VDb2xzOiBTaXJlblRhYmxlQ29sdW1uczxhbnk+W10gPSBbXTtcblx0QElucHV0KCkgZGF0YVNvdXJjZTogU2lyZW5EYXRhU291cmNlO1xuXHRwdWJsaWMgcmVhZG9ubHkgc2lyZW5UYWJsZUFjdGlvbiA9IFNpcmVuVGFibGVBY3Rpb247XG5cblx0QElucHV0KCkgYWxsb3dGaWx0ZXJpbmcgPSBmYWxzZTsgLy8gRGlzcGxheXMgc2VhcmNoIGJveCBpbnB1dCBhYm92ZSB0aGUgdGFibGVcblxuXG5cdEBJbnB1dCgpIGFsbG93TXVsdGlTZWxlY3Rpb24gPSBmYWxzZTtcblx0QElucHV0KCkgYWxsb3dTaW5nbGVTZWxlY3Rpb24gPSBmYWxzZTtcblx0QElucHV0KCkgYWxsb3dSZW9yZGVyaW5nID0gZmFsc2U7XG5cdEBJbnB1dCgpIHdpdGhEZWxldGUgPSBmYWxzZTtcblxuXHRASW5wdXQoKSBhbGxvd1BhZ2luYXRpb24gPSBmYWxzZTtcblxuXHRASW5wdXQoKSBsYWJlbHM6IFNpcmVuVGFibGVDb25maWc7IC8vIFJlcGxhY2VzIHBsYWNlaG9sZGVyIG9mIHN1Ym1pdCBidXR0b24sIHNlYXJjaCBib3gsIHNlbGVjdGVkIGl0ZW1zIHRleHQsIG5vIGRhdGEgZm91bmRcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9vbkRlc3Ryb3kgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXHRjbGlja2VkUm93OiBzdHJpbmcgfCBudW1iZXI7XG5cdGRpc3BsYXllZENvbHVtbnNXaXRoQWN0aW9uOiBzdHJpbmdbXSA9IFtdO1xuXHRleHBhbmRlZENvbHM6IFNpcmVuVGFibGVDb2x1bW5zPFNpcmVuVGFibGVEYXRhPltdID0gW107XG5cdGV4cGFuZGVkRWxlbWVudCA9IG51bGw7XG5cdHNlYXJjaFN0cmluZyA9ICcnO1xuXHRpbm5lckhlaWdodCA9IDA7XG5cdGlzQWxsU2VsZWN0ZWQgPSBmYWxzZTtcblx0c2VsZWN0ZWRSb3dDb3VudGVyID0gMDtcblx0cGFydGlhbFNlbGVjdGlvbiA9IGZhbHNlO1xuXHRjb3VudCA9IDA7XG5cblx0QENvbnRlbnRDaGlsZHJlbihDdXN0b21Db2xzRGlyZWN0aXZlKSBjdXN0b21UZW1wbGF0ZXM6IFF1ZXJ5TGlzdDxDdXN0b21Db2xzRGlyZWN0aXZlPjtcblx0cGFnZTogbnVtYmVyO1xuXHRzaXplOiBudW1iZXI7XG5cdHNvcnREaXJlY3Rpb246IFNvcnREaXJlY3Rpb247XG5cdHNvcnRDb2x1bW46IHN0cmluZztcblx0cHJpdmF0ZSBwcmV2aW91c0tleXdvcmQgPSAnJztcblxuXHRASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcblx0b25SZXNpemUoZXZlbnQ6IGFueSkge1xuXHRcdHRoaXMuaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdH1cblxuXHRuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG5cdFx0aWYgKGNoYW5nZXM/LmRpc3BsYXllZENvbHVtbnM/LnByZXZpb3VzVmFsdWUpe1xuXHRcdFx0dGhpcy5sb2FkQ29sdW1ucygpO1xuXHRcdH1cblx0XHRpZiAoY2hhbmdlcz8uZGF0YVNvdXJjZT8ucHJldmlvdXNWYWx1ZSkge1xuXHRcdFx0dGhpcy5jb25uZWN0VG9EYXRhc291cmNlKCk7XG5cdFx0XHR0aGlzLmNoZWNrRGF0YVNvdXJjZVBhZ2luYXRvckFuZFNvcnQoKTtcblx0XHR9XG5cdH1cblx0bmdPbkRlc3Ryb3koKTogdm9pZCB7XG5cdFx0dGhpcy5fb25EZXN0cm95Lm5leHQoKTtcblx0XHR0aGlzLl9vbkRlc3Ryb3kuY29tcGxldGUoKTtcblx0fVxuXG5cdG5nT25Jbml0KCk6IHZvaWQge1xuXHRcdHRoaXMuaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0dGhpcy5sb2FkQ29sdW1ucygpO1xuXHR9XG5cblx0cHJpdmF0ZSBsb2FkQ29sdW1ucygpOiB2b2lkIHtcblx0XHR0aGlzLmV4cGFuZGVkQ29scyA9IHRoaXMuZGlzcGxheWVkQ29sdW1ucy5maWx0ZXIoY29sdW1uID0+IGNvbHVtbi5leHBhbmRlZERhdGEpO1xuXHRcdHRoaXMuYmFzZUNvbHMgPSB0aGlzLmRpc3BsYXllZENvbHVtbnMuZmlsdGVyKGNvbHVtbiA9PiAhY29sdW1uLmV4cGFuZGVkRGF0YSk7XG5cdFx0dGhpcy5kaXNwbGF5ZWRDb2x1bW5zV2l0aEFjdGlvbiA9IHRoaXMuYmFzZUNvbHMubWFwKGNvbCA9PiBjb2wuY29sdW1uRGVmKTtcblx0XHRpZiAodGhpcy5leHBhbmRlZENvbHMubGVuZ3RoID4gMCAmJiAhdGhpcy5kaXNwbGF5ZWRDb2x1bW5zV2l0aEFjdGlvbj8uaW5jbHVkZXMoU2lyZW5UYWJsZUFjdGlvbi5FWFBBTkQpKSB7XG5cdFx0XHR0aGlzLmRpc3BsYXllZENvbHVtbnNXaXRoQWN0aW9uPy5wdXNoKFNpcmVuVGFibGVBY3Rpb24uRVhQQU5EKTtcblx0XHR9XG5cdFx0aWYgKCh0aGlzLmFsbG93U2luZ2xlU2VsZWN0aW9uIHx8IHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikgJiYgIXRoaXMuZGlzcGxheWVkQ29sdW1uc1dpdGhBY3Rpb24/LmluY2x1ZGVzKFNpcmVuVGFibGVBY3Rpb24uU0VMRUNUKSkge1xuXHRcdFx0dGhpcy5kaXNwbGF5ZWRDb2x1bW5zV2l0aEFjdGlvbj8udW5zaGlmdChTaXJlblRhYmxlQWN0aW9uLlNFTEVDVCk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLndpdGhEZWxldGUgJiYgIXRoaXMuZGlzcGxheWVkQ29sdW1uc1dpdGhBY3Rpb24/LmluY2x1ZGVzKFNpcmVuVGFibGVBY3Rpb24uREVMRVRFKSkge1xuXHRcdFx0dGhpcy5kaXNwbGF5ZWRDb2x1bW5zV2l0aEFjdGlvbj8ucHVzaChTaXJlblRhYmxlQWN0aW9uLkRFTEVURSk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmFsbG93UmVvcmRlcmluZyAmJiAhdGhpcy5kaXNwbGF5ZWRDb2x1bW5zV2l0aEFjdGlvbj8uaW5jbHVkZXMoU2lyZW5UYWJsZUFjdGlvbi5SRU9SREVSKSkge1xuXHRcdFx0dGhpcy5kaXNwbGF5ZWRDb2x1bW5zV2l0aEFjdGlvbj8udW5zaGlmdChTaXJlblRhYmxlQWN0aW9uLlJFT1JERVIpO1xuXHRcdH1cblx0fVxuXG5cdG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcblx0XHR0aGlzLmNvbm5lY3RUb0RhdGFzb3VyY2UoKTtcblx0XHR0aGlzLmNoZWNrRGF0YVNvdXJjZVBhZ2luYXRvckFuZFNvcnQoKTtcblx0fVxuXG5cdHByaXZhdGUgY2hlY2tEYXRhU291cmNlUGFnaW5hdG9yQW5kU29ydCgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5kYXRhU291cmNlIGluc3RhbmNlb2YgIFNpcmVuRmVEYXRhU291cmNlKXtcblx0XHRcdGlmICh0aGlzLmFsbG93UGFnaW5hdGlvbikge1xuXHRcdFx0XHR0aGlzLmRhdGFTb3VyY2U/LnNldFBhZ2luYXRvcih0aGlzLnBhZ2luYXRvcik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmRhdGFTb3VyY2U/LnNldFNvcnQodGhpcy5zb3J0KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGNvbm5lY3RUb0RhdGFzb3VyY2UoKTogdm9pZCB7XG5cdFx0dGhpcy5kYXRhU291cmNlPy5jb25uZWN0KCk/LnBpcGUodGFrZVVudGlsKHRoaXMuX29uRGVzdHJveSkpLnN1YnNjcmliZShkYXRhID0+IHtcblx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdHRoaXMuY291bnQgPSB0aGlzLmRhdGFTb3VyY2UuZ2V0Q291bnQoKTtcblx0XHRcdFx0dGhpcy51cGRhdGVQYXJhbXMoKTtcblx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb25TdGF0dXMoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGVzIHNvcnRDb2x1bW4gYW5kIHNvcnREaXJlY3Rpb25cblx0ICogQHBhcmFtIGNoYW5nZXMgY2hvc2VuIHNvcnRDT2x1bW4gYW5kIHNvcnREaXJlY3Rpb25cblx0ICovXG5cdHB1YmxpYyB1cGRhdGVTb3J0UGFyYW1zKGNoYW5nZXM6IHsgYWN0aXZlOiBzdHJpbmcsIGRpcmVjdGlvbjogU29ydERpcmVjdGlvbiB9KTogdm9pZCB7XG5cdFx0dGhpcy5zb3J0Q29sdW1uID0gY2hhbmdlcy5hY3RpdmU7XG5cdFx0dGhpcy5zb3J0RGlyZWN0aW9uID0gY2hhbmdlcy5kaXJlY3Rpb247XG5cdFx0Y29uc3QgZGF0YTogU2lyZW5UYWJsZUZpbHRlck1vZGVsID0geyBzb3J0Q29sdW1uOiB0aGlzLnNvcnRDb2x1bW4sIHNvcnREaXJlY3Rpb246IHRoaXMuc29ydERpcmVjdGlvbiB9O1xuXHRcdHRoaXMuZGF0YVNvdXJjZS51cGRhdGVTb3J0UGFyYW1zKGRhdGEpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZXMgcGFnZSBhbmQgc2l6ZVxuXHQgKiBAcGFyYW0gY2hhbmdlcyBjaG9zZW4gcGFnZSBhbmQgc2l6ZVxuXHQgKi9cblx0cHVibGljIHVwZGF0ZVBhZ2luYXRpb25QYXJhbXMoY2hhbmdlczoge3BhZ2VTaXplOiBudW1iZXIsIHBhZ2VJbmRleDogbnVtYmVyfSk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmFsbG93UGFnaW5hdGlvbil7IC8vIHVwZGF0ZVBhZ2luYXRpb25QYXJhbXMgaXMgYSBwdWJsaWMgbWV0aG9kID0+IEl0IGNhbiBiZSBjYWxsZWQgZnJvbSB0aGUgcGFyZW50IGNvbXBvbmVudC5cblx0XHRcdHRoaXMucGFnZSA9IGNoYW5nZXMucGFnZUluZGV4O1xuXHRcdFx0dGhpcy5zaXplID0gY2hhbmdlcy5wYWdlU2l6ZTtcblx0XHRcdGNvbnN0IGRhdGE6IFNpcmVuVGFibGVGaWx0ZXJNb2RlbCA9IHsgcGFnZTogdGhpcy5wYWdlLCBzaXplOiB0aGlzLnNpemUgfTtcblx0XHRcdHRoaXMuZGF0YVNvdXJjZS51cGRhdGVQYWdpbmF0aW9uUGFyYW1zKGRhdGEpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlUGFyYW1zKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmFsbG93UGFnaW5hdGlvbil7XG5cdFx0XHR0aGlzLnBhZ2UgPSB0aGlzLmRhdGFTb3VyY2U/LmdldFBhZ2UoKTtcblx0XHRcdHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleCA9IHRoaXMucGFnZTtcblx0XHRcdHRoaXMuc2l6ZSA9IHRoaXMuZGF0YVNvdXJjZT8uZ2V0U2l6ZSgpO1xuXHRcdFx0dGhpcy5wYWdpbmF0b3IucGFnZVNpemUgPSB0aGlzLnNpemU7XG5cdFx0fVxuXHRcdHRoaXMuc29ydENvbHVtbiA9IHRoaXMuZGF0YVNvdXJjZT8uZ2V0U29ydENvbHVtbigpO1xuXHRcdHRoaXMuc29ydC5hY3RpdmUgPSB0aGlzLnNvcnRDb2x1bW47XG5cdFx0dGhpcy5zb3J0RGlyZWN0aW9uID0gdGhpcy5kYXRhU291cmNlPy5nZXRTb3J0RGlyZWN0aW9uKCk7XG5cdFx0dGhpcy5zb3J0LmRpcmVjdGlvbiA9IHRoaXMuc29ydERpcmVjdGlvbjtcblx0XHR0aGlzLnNlYXJjaFN0cmluZyA9IHRoaXMuZGF0YVNvdXJjZT8uZ2V0S2V5d29yZCgpO1xuXHR9XG5cblx0LyoqIFNlbGVjdHMgYWxsIHJvd3MgaWYgdGhleSBhcmUgbm90IGFsbCBzZWxlY3RlZDsgb3RoZXJ3aXNlIGNsZWFyIHNlbGVjdGlvbi4gKi9cblx0cHVibGljIG1hc3RlclRvZ2dsZShldmVudDogTWF0Q2hlY2tib3hDaGFuZ2XCoCk6IHZvaWQge1xuXHRcdHRoaXMuY2xpY2tlZFJvdyA9IG51bGw7XG5cdFx0aWYgKGV2ZW50LmNoZWNrZWQpIHtcblx0XHRcdGlmICh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcblx0XHRcdFx0dGhpcy5kYXRhU291cmNlLnNlbGVjdEFsbFJvd3MoKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aGlzLmRhdGFTb3VyY2UuZGVzZWxlY3RBbGxSb3dzKGZhbHNlKTtcblx0XHRcdFx0ZXZlbnQuc291cmNlLmNoZWNrZWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLmRhdGFTb3VyY2UuZGVzZWxlY3RBbGxSb3dzKCk7XG5cdFx0fVxuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uU3RhdHVzKCk7XG5cdH1cblxuXHRnZXQgc2VhcmNoQ2hhbmdlZCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLnNlYXJjaFN0cmluZztcblx0fVxuXG5cdHNldCBzZWFyY2hDaGFuZ2VkKGlucHV0OiBzdHJpbmcpIHtcblx0XHR0aGlzLnNlYXJjaFN0cmluZyA9IGlucHV0Py50cmltKCk7XG5cdH1cblxuXHQvKipcblx0ICogU2VsZWN0cyByb3dcblx0ICogQHBhcmFtIGV2ZW50IGNoZWNrJ3MgZXZlbnRcblx0ICogQHBhcmFtIHJvdyBzZWxlY3RlZCByb3dcblx0ICovXG5cdHB1YmxpYyBzZWxlY3RSb3dUYWJsZShldmVudDogTWF0Q2hlY2tib3hDaGFuZ2UsIHJvdzogU2lyZW5UYWJsZURhdGEpOiB2b2lkIHtcblx0XHR0aGlzLmNsaWNrZWRSb3cgPSBudWxsO1xuXHRcdGlmIChldmVudD8uY2hlY2tlZCkge1xuXHRcdFx0aWYgKCF0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcblx0XHRcdFx0dGhpcy5kYXRhU291cmNlLmRlc2VsZWN0QWxsUm93cyhmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmRhdGFTb3VyY2Uuc2VsZWN0Um93KHJvdyk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dGhpcy5kYXRhU291cmNlLmRlc2VsZWN0Um93KHJvdyk7XG5cdFx0fVxuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uU3RhdHVzKCk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlc2UgZnVuY3Rpb24gaXMgdXNlZCB0byB1cGRhdGUgY2hlY2tib3ggc3RhdHVzXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZVNlbGVjdGlvblN0YXR1cygpOiB2b2lkIHtcblx0XHR0aGlzLmlzQWxsU2VsZWN0ZWQgPSB0aGlzLmRhdGFTb3VyY2U/LmlzQWxsUm93c1NlbGVjdGVkKCk7XG5cdFx0dGhpcy5wYXJ0aWFsU2VsZWN0aW9uID0gdGhpcy5kYXRhU291cmNlPy5nZXRTZWxlY3Rpb25Db3VudGVyKCkgPiAwO1xuXHRcdHRoaXMuc2VsZWN0ZWRSb3dDb3VudGVyID0gdGhpcy5kYXRhU291cmNlPy5nZXRTZWxlY3Rpb25Db3VudGVyKCk7XG5cdH1cblxuXHQvKipcblx0ICogRmlsdGVycyB0YWJsZSdzIGRhdGEgYmFzZWQgb24gZ2l2ZW4ga2V5d29yZFxuXHQgKiBAcGFyYW0ga2V5d29yZCBrZXl3b3JkIGluIHNlYXJjaCBib3ggaW5wdXRcblx0ICovXG5cdHB1YmxpYyBxdWlja1NlYXJjaENoYW5nZWQoa2V5d29yZDogc3RyaW5nKTogdm9pZCB7XG5cdFx0a2V5d29yZCA9IGtleXdvcmQ/LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmIChrZXl3b3JkICE9PSB0aGlzLnByZXZpb3VzS2V5d29yZCAmJiB0aGlzLmFsbG93RmlsdGVyaW5nKXtcblx0XHRcdHRoaXMucHJldmlvdXNLZXl3b3JkID0ga2V5d29yZDtcblx0XHRcdGlmICh0aGlzLmFsbG93UGFnaW5hdGlvbil7XG5cdFx0XHRcdHRoaXMucGFnZSA9IERlZmF1bHRGaWx0ZXJWYWx1ZS5ERUZBVUxUX1BBR0U7XG5cdFx0XHRcdHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleCA9IHRoaXMucGFnZTtcblx0XHRcdH1cblx0XHRcdGtleXdvcmQgPSBrZXl3b3JkPy50cmltKCkudG9Mb3dlckNhc2UoKTsgLy8gUmVtb3ZlIHdoaXRlc3BhY2Vcblx0XHRcdHRoaXMuZGF0YVNvdXJjZS5maWx0ZXIoa2V5d29yZCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSByb3cgRW1pdHMgdGhlIHJvdyB0byBiZSBkZWxldGVkIGFuZCBpdHMgaW5kZXggdGhyb3VnaCBgb25EZWxldGVDbGlja2AgbGlzdGVuZXJcblx0ICovXG5cdHB1YmxpYyBkZWxldGVCdG5DbGlja2VkKHJvdzogU2lyZW5UYWJsZURhdGEpOiB2b2lkIHtcblx0XHRpZihyb3cuaXNTZWxlY3RlZCl7XG5cdFx0XHR0aGlzLmRhdGFTb3VyY2UuZGVzZWxlY3RSb3cocm93KTtcblx0XHR9XG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLmRhdGFTb3VyY2UuZ2V0SW5kZXhPZihyb3cpO1xuXHRcdHRoaXMub25EZWxldGVDbGljay5lbWl0KHsgcm93LCBpbmRleH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEVtaXRzIGNsaWNrZWQgcm93IHRocm91Z2ggYG9uUm93Q2xpY2tgIGxpc3RlbmVyXG5cdCAqIEBwYXJhbSByb3cgY2xpY2tlZCByb3dcblx0ICovXG5cdHB1YmxpYyBvblJvd0NsaWNrQ2xpY2tlZChyb3c6IFNpcmVuVGFibGVEYXRhKTogdm9pZCB7XG5cdFx0aWYodGhpcy5vblJvd0NsaWNrLm9ic2VydmVycy5sZW5ndGggPiAwICkgeyAvLyBjaGVjayBpZiB0aGUgcGFyZW50IGNvbXBvbmVudCBpcyBsaXN0ZW5pbmcgb24gcm93IGNsaWNrIGV2ZW50XG5cdFx0XHR0aGlzLmNsaWNrZWRSb3cgPSByb3cuc2VsZWN0aW9uSWQ7XG5cdFx0XHR0aGlzLm9uUm93Q2xpY2suZW1pdChyb3cpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTd2FwcyB0YWJsZSdzIHJvd3Ncblx0ICogQHBhcmFtIGV2ZW50IGVtaXR0ZWQgd2hlbiB0aGUgdXNlciBkcm9wcyBhIGRyYWdnYWJsZSBpdGVtIGluc2lkZSBhIGRyb3AgY29udGFpbmVyLlxuXHQgKi9cblx0cHVibGljIHN3YXBSb3dzKGV2ZW50OiBDZGtEcmFnRHJvcDxTaXJlblRhYmxlQ29sdW1uczxhbnk+W10+KTogdm9pZCB7XG5cdFx0Y29uc3QgcHJldmlvdXNJbmRleCA9IHRoaXMuYWxsb3dQYWdpbmF0aW9uID8gZXZlbnQucHJldmlvdXNJbmRleCArIHRoaXMucGFnZSp0aGlzLnNpemUgOiBldmVudC5wcmV2aW91c0luZGV4O1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuYWxsb3dQYWdpbmF0aW9uID8gZXZlbnQuY3VycmVudEluZGV4ICsgdGhpcy5wYWdlKnRoaXMuc2l6ZSA6IGV2ZW50LmN1cnJlbnRJbmRleDtcblx0XHR0aGlzLmRhdGFTb3VyY2Uuc3dhcFJvd3MocHJldmlvdXNJbmRleCAsIGN1cnJlbnRJbmRleCk7XG5cdFx0dGhpcy50YWJsZS5yZW5kZXJSb3dzKCk7XG5cdFx0dGhpcy5vblJlb3JkZXIuZW1pdCh7ZXZlbnQsIGRhdGE6IHRoaXMuZGF0YVNvdXJjZS5nZXREYXRhKCl9KTtcblx0fVxufVxuIiwiPGRpdiBjbGFzcz1cInNpcmVuLXRhYmxlLXNlYXJjaC1jb250YWluZXJcIiA+XG4gICAgPG1hdC1mb3JtLWZpZWxkIGFwcGVhcmFuY2U9XCJmaWxsXCIgY2xhc3M9XCJzaXJlbi10YWJsZS1zZWFyY2gtZmllbGQgZnVsbC13aWR0aC1tb2JpbGVcIiAgKm5nSWY9XCJhbGxvd0ZpbHRlcmluZ1wiID5cbiAgICAgICAgPGJ1dHRvbiAqbmdJZj1cInNlYXJjaENoYW5nZWQgIT09ICcnXCIgbWF0LWljb24tYnV0dG9uIG1hdFN1ZmZpeCAoY2xpY2spPVwic2VhcmNoQ2hhbmdlZCA9ICcnOyBxdWlja1NlYXJjaENoYW5nZWQoJycpXCI+XG4gICAgICAgICAgICA8bWF0LWljb24gY2xhc3M9XCJzaXJlbi10YWJsZS1tYXQtaWNvbnNcIj5jbGVhcjwvbWF0LWljb24+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8aW5wdXQgYXV0b2NvbXBsZXRlPVwib2ZmXCIgKGtleXVwKT1cInF1aWNrU2VhcmNoQ2hhbmdlZCgkZXZlbnQudGFyZ2V0LnZhbHVlKVwiXG4gICAgICAgICAgICBtYXRJbnB1dCBbcGxhY2Vob2xkZXJdPVwibGFiZWxzPy5zZWFyY2hCb3hMYWJlbCA/PyAn2KjYrdirJ1wiIFsobmdNb2RlbCldPVwic2VhcmNoQ2hhbmdlZFwiPlxuICAgICAgICA8YnV0dG9uIG1hdC1pY29uLWJ1dHRvbiBtYXRQcmVmaXg+PG1hdC1pY29uIGNsYXNzPVwic2lyZW4tdGFibGUtbWF0LWljb25zXCI+c2VhcmNoPC9tYXQtaWNvbj48L2J1dHRvbj5cbiAgICA8L21hdC1mb3JtLWZpZWxkPlxuPC9kaXY+XG5cbjxkaXYgKm5nSWY9XCJjb3VudCA9PT0gMFwiIHN0eWxlPVwicGFkZGluZy1pbmxpbmUtc3RhcnQ6IDEwcHg7XCI+e3sgbGFiZWxzPy5ub0RhdGFMYWJlbCA/PyBcItmE2Kcg2YrZiNis2K8g2KjZitin2YbYp9iqXCIgfX08L2Rpdj5cblxuPGRpdiBjbGFzcz1cInNpcmVuLXRhYmxlLWNvbnRhaW5lciBtYXQtZWxldmF0aW9uLXo4XCIgW25nQ2xhc3NdPVwieyd2aXNpYmlsaXR5LWhpZGRlbic6IGNvdW50ID09PSAwfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJzaXJlbi10YWJsZS1kYXRhLWNvbnRhaW5lclwiIFtuZ1N0eWxlXT1cInsgJ2hlaWdodCc6IChpbm5lckhlaWdodCAqIDAuMzUpICsgJ3B4JyB9XCI+XG4gICAgICAgIDx0YWJsZSBtYXQtdGFibGUgI3RhYmxlIG11bHRpVGVtcGxhdGVEYXRhUm93cyBbZGF0YVNvdXJjZV09XCJkYXRhU291cmNlXCIgY2xhc3M9XCJzaXJlbi10YWJsZVwiIG1hdFNvcnQgW21hdFNvcnRBY3RpdmVdPVwic29ydENvbHVtblwiIFttYXRTb3J0RGlyZWN0aW9uXT1cInNvcnREaXJlY3Rpb25cIiAobWF0U29ydENoYW5nZSk9XCJ1cGRhdGVTb3J0UGFyYW1zKCRldmVudClcIiBjZGtEcm9wTGlzdCBbY2RrRHJvcExpc3REYXRhXT1cImRhdGFTb3VyY2VcIiAoY2RrRHJvcExpc3REcm9wcGVkKT1cInN3YXBSb3dzKCRldmVudClcIj5cbiAgICAgICAgICAgIDwhLS0gQ2hlY2tib3ggQ29sdW1uIHRvIHNlbGVjdCAtLT5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJhbGxvd1NpbmdsZVNlbGVjdGlvbiB8fCBhbGxvd011bHRpU2VsZWN0aW9uXCIgbWF0Q29sdW1uRGVmPXt7c2lyZW5UYWJsZUFjdGlvbi5TRUxFQ1R9fT5cbiAgICAgICAgICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmIGNsYXNzPVwic2lyZW4tdGFibGUtY2hlY2tib3gtY29sIHNpcmVuLWFjdGlvbi1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1jaGVja2JveCAgI3NlbGVjdEFsbENoZWNrYm94ICpuZ0lmPVwiYWxsb3dNdWx0aVNlbGVjdGlvbiB8fCBwYXJ0aWFsU2VsZWN0aW9uXCIgY29sb3I9XCJwcmltYXJ5XCIgKGNoYW5nZSk9XCIkZXZlbnQgPyBtYXN0ZXJUb2dnbGUoJGV2ZW50KSA6IG51bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2NoZWNrZWRdPVwiaXNBbGxTZWxlY3RlZFwiIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2luZGV0ZXJtaW5hdGVdPVwicGFydGlhbFNlbGVjdGlvbiAmJiAhaXNBbGxTZWxlY3RlZFwiIGNsYXNzPVwic2lyZW4tdGFibGUtY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9tYXQtY2hlY2tib3g+XG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93XCIgY2xhc3M9XCJzaXJlbi10YWJsZS1jaGVja2JveC1jb2xcIiBbbmdTdHlsZV09XCJ7J2JvcmRlci1ib3R0b20td2lkdGgnOiBleHBhbmRlZENvbHMubGVuZ3RoID4gMCA/IDAgOiBpbmhlcml0fVwiPlxuICAgICAgICAgICAgICAgICAgICA8bWF0LWNoZWNrYm94IGNvbG9yPVwicHJpbWFyeVwiIChjaGFuZ2UpPVwiJGV2ZW50ID8gc2VsZWN0Um93VGFibGUoJGV2ZW50LCByb3cpIDogbnVsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbY2hlY2tlZF09XCJyb3cuaXNTZWxlY3RlZCB8fCBzZWxlY3RBbGxDaGVja2JveD8uY2hlY2tlZFwiIGNsYXNzPVwic2lyZW4tdGFibGUtY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9tYXQtY2hlY2tib3g+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8IS0tIFBvc2l0aW9uIENvbHVtbiAtLT5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJhbGxvd1Jlb3JkZXJpbmdcIiBtYXRDb2x1bW5EZWY9e3tzaXJlblRhYmxlQWN0aW9uLlJFT1JERVJ9fSBjbGFzcz1cInNpcmVuLWFjdGlvbi1jb2xcIj5cbiAgICAgICAgICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsIGNsYXNzPVwibW9udHNlcnJhdCBib2xkIHNpcmVuLWFjdGlvbi1jb2xcIiAqbWF0SGVhZGVyQ2VsbERlZj48L3RoPlxuICAgICAgICAgICAgICAgIDx0ZCBtYXQtY2VsbCBjbGFzcz1cIm9wZW5TYW5zXCIgKm1hdENlbGxEZWY9XCJsZXQgZWxlbWVudFwiPlxuICAgICAgICAgICAgICAgIDxtYXQtaWNvbiBjbGFzcz1cInNpcmVuLXRhYmxlLW1hdC1pY29uc1wiIGNka0RyYWdIYW5kbGU+cmVvcmRlcjwvbWF0LWljb24+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8IS0tIHNob3cgaGlkZSBkZXRhaWxzIC0tPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImV4cGFuZGVkQ29scy5sZW5ndGggPiAwXCIgbWF0Q29sdW1uRGVmPXt7c2lyZW5UYWJsZUFjdGlvbi5FWFBBTkR9fSBjbGFzcz1cInNpcmVuLWFjdGlvbi1jb2xcIj5cbiAgICAgICAgICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsIGNsYXNzPVwibW9udHNlcnJhdCBib2xkIHNpcmVuLWFjdGlvbi1jb2xcIiAqbWF0SGVhZGVyQ2VsbERlZj4gPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgbWF0LWNlbGwgY2xhc3M9XCJvcGVuU2Fuc1wiICptYXRDZWxsRGVmPVwibGV0IGVsZW1lbnRcIiBbbmdTdHlsZV09XCJ7J2JvcmRlci1ib3R0b20td2lkdGgnOiBleHBhbmRlZENvbHMubGVuZ3RoID4gMCA/IDAgOiBpbmhlcml0fVwiPlxuICAgICAgICAgICAgICAgICAgICA8bWF0LWljb24gY2xhc3M9XCJzaXJlbi10YWJsZS1leHBhbmQtYnRuIHNpcmVuLXRhYmxlLW1hdC1pY29uc1wiIChjbGljayk9XCJleHBhbmRlZEVsZW1lbnQgPSBleHBhbmRlZEVsZW1lbnQgPT09IGVsZW1lbnQgPyBudWxsIDogZWxlbWVudFwiPnt7ZXhwYW5kZWRFbGVtZW50ID09PSBlbGVtZW50ID8gJ2V4cGFuZF9sZXNzJyA6ICdleHBhbmRfbW9yZSd9fTwvbWF0LWljb24+XG4gICAgICAgICAgICAgICAgPC90ZD4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgPCEtLSBEZWxldGUgcm93IGFjdGlvbiAtLT5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJ3aXRoRGVsZXRlXCIgbWF0Q29sdW1uRGVmPVwie3sgc2lyZW5UYWJsZUFjdGlvbi5ERUxFVEUgfX1cIiBjbGFzcz1cInNpcmVuLWFjdGlvbi1jb2xcIj5cbiAgICAgICAgICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmIGNsYXNzPVwic2lyZW4tYWN0aW9uLWNvbFwiPjwvdGg+IFxuICAgICAgICAgICAgICAgIDx0ZCBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCBlbGVtZW50XCIgW25nU3R5bGVdPVwieydib3JkZXItYm90dG9tLXdpZHRoJzogZXhwYW5kZWRDb2xzLmxlbmd0aCA+IDAgPyAwIDogaW5oZXJpdH1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBtYXQtbWluaS1mYWIgY2xhc3M9XCJzaXJlbi10YWJsZS1kZWxldGUtYnRuXCIgKGNsaWNrKT1cImRlbGV0ZUJ0bkNsaWNrZWQoZWxlbWVudClcIj48bWF0LWljb24gY2xhc3M9XCJzaXJlbi10YWJsZS1tYXQtaWNvbnNcIj5kZWxldGU8L21hdC1pY29uPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgPCEtLSBUaGUgYmFzZSBjb2x1bW5zIC0tPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgY29sdW1uIG9mIGJhc2VDb2xzXCIgbWF0Q29sdW1uRGVmPXt7Y29sdW1uLmNvbHVtbkRlZn19PlxuICAgICAgICAgICAgICAgIDwhLS0gZGVmYXVsdCBjb2x1bW5zIC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCIhY29sdW1uLmN1c3RvbUNvbHVtblwiPlxuICAgICAgICAgICAgICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsIGNsYXNzPVwibW9udHNlcnJhdCBib2xkIHNpcmVuLXRhYmxlLWhlYWRlclwiICptYXRIZWFkZXJDZWxsRGVmPVwibGV0IGVsZW1lbnRcIiBtYXQtc29ydC1oZWFkZXIgW2Rpc2FibGVkXT1cIiFjb2x1bW4uYWxsb3dTb3J0aW5nID8/IGZhbHNlXCI+IHt7Y29sdW1uLmhlYWRlcn19IDwvdGg+IFxuICAgICAgICAgICAgICAgICAgICA8dGQgbWF0LWNlbGwgY2xhc3M9XCJvcGVuU2Fuc1wiICptYXRDZWxsRGVmPVwibGV0IGVsZW1lbnRcIiBjbGFzcz1cInNpcmVuLXRhYmxlLWNlbGxcIiBbbmdDbGFzc109XCJ7J2N1cnNvci1wb2ludGVyJzogb25Sb3dDbGljay5vYnNlcnZlcnMubGVuZ3RoID4gMH1cIiAoY2xpY2spPVwib25Sb3dDbGlja0NsaWNrZWQoZWxlbWVudClcIiBcbiAgICAgICAgICAgICAgICAgICAgW25nU3R5bGVdPVwieydib3JkZXItYm90dG9tLXdpZHRoJzogZXhwYW5kZWRDb2xzLmxlbmd0aCA+IDAgPyAwIDogaW5oZXJpdH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIFttYXRUb29sdGlwXT1cImNvbHVtbi5jZWxsVmFsdWUoZWxlbWVudClcIiBhcHBUb29sdGlwSWZUcnVuY2F0ZWQgKm5nSWY9XCJjb2x1bW4uY2VsbFZhbHVlKGVsZW1lbnQpICE9PSB0cnVlICYmIGNvbHVtbi5jZWxsVmFsdWUoZWxlbWVudCkgIT09IGZhbHNlXCIgW25nQ2xhc3NdPVwieydlbGxpcHNpcy1vdmVyZmxvdyc6IGNvbHVtbi5hbGxvd0VsbGlwc2lzfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGNvbHVtbi5jZWxsVmFsdWUoZWxlbWVudCkgfHwgJyAnfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtaWNvbiBjbGFzcz1cInNpcmVuLXRhYmxlLWNoZWNrZWQtaWNvbiBzaXJlbi10YWJsZS1tYXQtaWNvbnNcIiAqbmdJZj1cImNvbHVtbi5jZWxsVmFsdWUoZWxlbWVudCkgPT09IHRydWVcIj5jaGVja19jaXJjbGU8L21hdC1pY29uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwic2lyZW4tdGFibGUtdW5jaGVja2VkLWljb24gc2lyZW4tdGFibGUtbWF0LWljb25zXCIgKm5nSWY9XCJjb2x1bW4uY2VsbFZhbHVlKGVsZW1lbnQpID09PSBmYWxzZVwiPmNhbmNlbDwvbWF0LWljb24+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPCEtLSBjdXN0b20gdGVtcGxhdGUgY29sdW1ucyAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY29sdW1uLmN1c3RvbUNvbHVtblwiPlxuICAgICAgICAgICAgICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsIGNsYXNzPVwibW9udHNlcnJhdCBib2xkIHNpcmVuLXRhYmxlLWhlYWRlclwiICptYXRIZWFkZXJDZWxsRGVmPVwibGV0IGVsZW1lbnRcIj4ge3sgY29sdW1uLmhlYWRlciB9fTwvdGg+IFxuICAgICAgICAgICAgICAgICAgICA8dGQgbWF0LWNlbGwgY2xhc3M9XCJzaXJlbi10YWJsZS1jZWxsXCIgKm1hdENlbGxEZWY9XCJsZXQgZWxlbWVudFwiIFtuZ0NsYXNzXT1cInsnY3Vyc29yLXBvaW50ZXInOiBvblJvd0NsaWNrLm9ic2VydmVycy5sZW5ndGggPiAwfVwiIFtuZ1N0eWxlXT1cInsnYm9yZGVyLWJvdHRvbS13aWR0aCc6IGV4cGFuZGVkQ29scy5sZW5ndGggPiAwID8gMCA6IGluaGVyaXR9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiY3VzdG9tVGVtcGxhdGVzIHwgY3VzdG9tVGVtcGxhdGUgOiBjb2x1bW4uY29sdW1uRGVmOyBjb250ZXh0OiB7JGltcGxpY2l0OiBlbGVtZW50fVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgPCEtLSBleHBhbmRlZCBjb2x1bW5zIC0tPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJzaXJlbkV4cGFuZGVkRGF0YVwiPlxuICAgICAgICAgICAgICAgIDx0ZCBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCBlbGVtZW50XCIgW2F0dHIuY29sc3Bhbl09XCJkaXNwbGF5ZWRDb2x1bW5zV2l0aEFjdGlvbi5sZW5ndGgrMVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2lyZW4tdGFibGUtZXhwYW5kLXJvd1wiICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgZXhwYW5kZWRDb2xzXCJcbiAgICAgICAgICAgICAgICAgICAgW0BkZXRhaWxFeHBhbmRdPVwiZWxlbWVudCA9PSBleHBhbmRlZEVsZW1lbnQgPyAnZXhwYW5kZWQnIDogJ2NvbGxhcHNlZCdcIiBbc3R5bGUuaGVpZ2h0XT1cImVsZW1lbnQgPT0gZXhwYW5kZWRFbGVtZW50ID8gJ3Vuc2V0JyA6ICcwICFpbXBvcnRhbnQnXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY29sdW1uLmNlbGxWYWx1ZShlbGVtZW50KVwiPnt7IGNvbHVtbi5oZWFkZXIgfHwgJyd9fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImNvbHVtbi5jZWxsVmFsdWUoZWxlbWVudClcIj57eyBjb2x1bW4uY2VsbFZhbHVlKGVsZW1lbnQpIHx8ICcnfX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8dHIgbWF0LWhlYWRlci1yb3cgKm1hdEhlYWRlclJvd0RlZj1cImRpc3BsYXllZENvbHVtbnNXaXRoQWN0aW9uOyBzdGlja3k6IHRydWVcIj48L3RyPlxuICAgICAgICAgICAgPHRyIG1hdC1yb3cgKm1hdFJvd0RlZj1cImxldCByb3c7IGNvbHVtbnM6IGRpc3BsYXllZENvbHVtbnNXaXRoQWN0aW9uXCIgY2RrRHJhZyBbY2RrRHJhZ0Rpc2FibGVkXT1cIiFhbGxvd1Jlb3JkZXJpbmdcIiBbY2RrRHJhZ0RhdGFdPVwicm93XCJcbiAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7ICdzZWxlY3RlZCc6IChyb3c/LmlzU2VsZWN0ZWQpIHx8IChyb3c/LnNlbGVjdGlvbklkID09IGNsaWNrZWRSb3cgJiYgY2xpY2tlZFJvdyAhPSB1bmRlZmluZWQpLCAnZWxlbWVudC1yb3cnOiBvblJvd0NsaWNrLm9ic2VydmVycy5sZW5ndGggPiAwIH1cIj5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZXhwYW5kZWRDb2xzLmxlbmd0aCA+IDBcIj5cbiAgICAgICAgICAgICAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHJvdzsgY29sdW1uczogWydzaXJlbkV4cGFuZGVkRGF0YSddXCIgY2xhc3M9XCJkZXRhaWwtcm93XCIgW25nQ2xhc3NdPVwieyAnc2VsZWN0ZWQnOiAocm93LmlzU2VsZWN0ZWQpIHx8IChyb3cuc2VsZWN0aW9uSWQgPT09IGNsaWNrZWRSb3cgJiYgY2xpY2tlZFJvdyAhPSB1bmRlZmluZWQpfVwiPjwvdHI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwic2lyZW4tdGFibGUtcGFnaW5hdG9yLWNvbnRhaW5lclwiICpuZ0lmPVwiYWxsb3dQYWdpbmF0aW9uXCI+XG4gICAgICAgIDxtYXQtcGFnaW5hdG9yIFtwYWdlU2l6ZV09XCJzaXplXCIgW3BhZ2VJbmRleF09XCJwYWdlXCIgW2xlbmd0aF09XCJjb3VudFwiICNwYWdpbmF0b3IgKHBhZ2UpPVwidXBkYXRlUGFnaW5hdGlvblBhcmFtcygkZXZlbnQpXCIgW3BhZ2VTaXplT3B0aW9uc109XCJbMTAsIDIwLCA1MCwgMTAwLCAyMDAsIDEwMDBdXCIgc2hvd0ZpcnN0TGFzdEJ1dHRvbnMgPjwvbWF0LXBhZ2luYXRvcj5cbiAgICAgICAgPGRpdiAqbmdJZj1cIihhbGxvd011bHRpU2VsZWN0aW9uIHx8IGFsbG93U2luZ2xlU2VsZWN0aW9uKSAmJiBzZWxlY3RlZFJvd0NvdW50ZXIgPiAwXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNpcmVuLXRhYmxlLXNlbGVjdGlvbi1jb3VudGVyXCIgPnt7c2VsZWN0ZWRSb3dDb3VudGVyfX0ge3sgbGFiZWxzPy5zZWxlY3Rpb25MYWJlbCA/PyBcItio2YrYp9mG2KfYqiDZhdit2K/Yr9ipXCIgfX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9kaXY+XG48ZGl2IGNsYXNzPVwic3VibWl0LWNvbnRhaW5lclwiICpuZ0lmPVwiKCBhbGxvd1NpbmdsZVNlbGVjdGlvbiB8fCBhbGxvd011bHRpU2VsZWN0aW9uICkgJiYgY291bnQgIT09IDBcIiBzdHlsZT1cInBhZGRpbmctdG9wOiA4cHg7IG1hcmdpbjogMTBweCAxNXB4XCI+XG4gICAgPGJ1dHRvbiBtYXQtcmFpc2VkLWJ1dHRvbiBjbGFzcz1cInNpcmVuLXRhYmxlLXN1Ym1pdC1idG5cIiAoY2xpY2spPVwib25TdWJtaXRDbGljay5lbWl0KHRoaXMuZGF0YVNvdXJjZS5nZXRTZWxlY3RlZFJvd3MoKSlcIj57eyBsYWJlbHM/LmRvbmVCdG5MYWJlbCA/PyBcItin2YbYqtmH2KfYoVwiIH19PC9idXR0b24+XG48L2Rpdj5cbiJdfQ==